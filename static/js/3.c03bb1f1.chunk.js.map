{"version":3,"sources":["Components/Profile/ProfileInfo/ProfileInfo.module.css","Components/Profile/MyPosts/MyPosts.module.css","Components/Profile/MyPosts/Post/Post.module.css","Components/Profile/ProfileInfo/ProfileStatusWithHooks.tsx","Components/Profile/ProfileInfo/ProfileInfo.tsx","Components/Profile/MyPosts/Post/Post.tsx","Components/Profile/MyPosts/MyPosts.tsx","Components/Profile/MyPosts/MyPostsContainer.tsx","Components/Profile/Profile.tsx","Components/Profile/ProfileContainer.tsx"],"names":["module","exports","ProfileStatusWithHooks","props","useState","editMode","setEditMode","status","setStatus","useEffect","onChange","e","currentTarget","value","autoFocus","onBlur","updateStatus","onDoubleClick","ProfileInfo","profile","isOwner","changePhoto","Preloader","className","s","profileInfo","description","src","photos","large","UserAvatar","mainPhoto","type","files","photo","aboutMe","contacts","facebook","instagram","Post","item","alt","message","likesCount","MyPosts","React","memo","console","log","postsElements","profilePage","posts","map","p","id","myPosts","MyPostReduxForm","onSubmit","values","addPost","newPostBody","post","maxLength","maxLengthCreator","reduxForm","form","handleSubmit","Field","placeholder","name","component","Textarea","validate","required","MyPostsContainer","connect","state","dispatch","AddPostActionCreator","Profile","ProfileContainer","userId","this","match","params","authorizedUserId","history","push","getProfileTC","getStatusTC","refreshProfile","prevProps","prevState","updateStatusTC","changePhotoTC","Component","compose","auth","isAuth","isFetching","usersPage","withRouter","withAuthRedirect"],"mappings":"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","file":"static/js/3.c03bb1f1.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"description\":\"ProfileInfo_description__1FWdy\",\"mainPhoto\":\"ProfileInfo_mainPhoto__1uFrv\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"myPosts\":\"MyPosts_myPosts__1woWL\",\"post\":\"MyPosts_post__1V8Cz\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"item\":\"Post_item__2BJYU\"};","import React, {ChangeEvent, useEffect, useState} from \"react\";\n\n\ntype ProfileStatusPropsType = {\n    status: string\n    updateStatus: (status: string) => void\n}\n\nexport const ProfileStatusWithHooks = (props: ProfileStatusPropsType) => {\n\n    const [editMode, setEditMode] = useState(false);\n    const [status, setStatus] = useState(\"\");\n\n    useEffect( () => {\n        setStatus(props.status)\n    }, [props.status])\n\n    const activateEditMode = () => {\n        setEditMode(true)\n    }\n    const onChangeStatus = (e: ChangeEvent<HTMLInputElement>) => {\n        setStatus(e.currentTarget.value)\n    }\n    const deActivateEditMode = () => {\n        setEditMode(false)\n        props.updateStatus(status)\n    }\n\n    return (\n        <div>\n            { !editMode ?\n                <div>\n                    <span onDoubleClick={activateEditMode}>{props.status || \"No status\"}</span>\n                </div>\n                :\n                <div>\n                    <input\n                        onChange={onChangeStatus}\n                        autoFocus={true}\n                        onBlur={deActivateEditMode}\n                        value={status}\n                    />\n                </div>\n            }\n        </div>\n    )\n}\n","import React, {ChangeEvent} from \"react\";\nimport s from \"./ProfileInfo.module.css\";\nimport {Preloader} from \"../../common/Preloader/Preloader\";\nimport {ProfileType} from \"../ProfileContainer\";\nimport {ProfileStatusWithHooks} from \"./ProfileStatusWithHooks\";\nimport UserAvatar from \"../../../assets/images/UserAvatar.jpeg\";\nimport {photoFileType} from \"../../../redux/profile-reducer\";\n\n\ntype ProfileInfoPropsType = {\n    profile?: ProfileType\n    status: string\n    updateStatus: (status: string) => void\n    isOwner: boolean\n    changePhoto: (file: photoFileType) => void\n}\n\nexport const ProfileInfo: React.FC<ProfileInfoPropsType> = ({\n                                                                profile,\n                                                                status,\n                                                                updateStatus,\n                                                                isOwner,\n                                                                changePhoto\n                                                            }) => {\n\n    if (!profile) {\n        return <Preloader/>\n    }\n\n    const onPhotoChange = (e: ChangeEvent<HTMLInputElement>) => {\n        if (e.currentTarget.files) {\n            const photo = e.currentTarget.files[0]\n            changePhoto(photo)\n        }\n\n    }\n\n    return (\n        <div className={s.profileInfo}>\n            <div className={s.description}>\n\n                <img src={profile.photos.large || UserAvatar} className={s.mainPhoto}/>\n                <div>\n                    {isOwner && <input type={\"file\"} onChange={onPhotoChange}/>}\n                </div>\n                <ProfileStatusWithHooks status={status}\n                                        updateStatus={updateStatus}\n                />\n                <div>\n                    Обо мне:\n                    {profile.aboutMe}\n                </div>\n                Контакты:\n                <div>\n                    {profile.contacts.facebook}\n                </div>\n                <div>\n                    {profile.contacts.instagram}\n                </div>\n\n            </div>\n        </div>\n    )\n};","import React from \"react\";\nimport s from \"./Post.module.css\";\n\n\ntype MessagePropsType = {\n    id: number\n    message: string\n    likesCount: number\n}\n\nexport function Post(props: MessagePropsType) {\n\n    return (\n        <div className={s.item}>\n            <img src=\"https://whatsism.com/uploads/posts/2018-07/1530546770_rmk_vdjbx10.jpg\" alt=\"\"/>\n            {props.message}\n            <div>\n                <span>Likes</span> {props.likesCount}\n            </div>\n        </div>\n    )\n}","import React from \"react\";\nimport {InitialStateType} from \"../../../redux/profile-reducer\";\nimport s from \"./MyPosts.module.css\";\nimport {Post} from \"./Post/Post\";\nimport {Field, InjectedFormProps, reduxForm} from \"redux-form\";\nimport {maxLengthCreator, required} from \"../../../utils/validators/validators\";\nimport {Textarea} from \"../../common/FormsControls/FormsControls\";\n\n\ntype MyPostsPropsType = {\n    profilePage: InitialStateType\n    addPost: (newPostBody: string) => void\n}\n\n\nexport const MyPosts = React.memo((props: MyPostsPropsType) => {\n\n    console.log(\"RENDER\")\n\n    let state = props.profilePage\n\n    let postsElements = state.posts\n        .map((p) => <Post id={p.id} message={p.message} likesCount={p.likesCount}/>)\n\n    let addNewPost = (values: MyPostFormType) => {\n        props.addPost(values.newPostBody);\n    }\n\n\n    return (\n        <div className={s.myPosts}>\n            My posts\n            <div>\n                <MyPostReduxForm onSubmit={addNewPost}/>\n            </div>\n\n            <div className={s.post}>\n                new post\n            </div>\n            {postsElements}\n        </div>\n    )\n})\n\ntype MyPostFormType = {\n    newPostBody: string\n}\n\nconst maxLength = maxLengthCreator(11)\n\nconst MyPostForm: React.FC<InjectedFormProps<MyPostFormType>> = (props) => {\n    return (\n        <form onSubmit={props.handleSubmit}>\n            <Field placeholder={\"Enter your post\"}\n                   name={\"newPostBody\"}\n                   component={Textarea}\n                   validate={[required, maxLength]}\n            />\n            <button>Add post</button>\n        </form>\n    )\n}\n\nconst MyPostReduxForm = reduxForm<MyPostFormType>({\n    // a unique name for the form\n    form: 'MyPostForm'\n})(MyPostForm)","import React from \"react\";\nimport {AddPostActionCreator, InitialStateType} from \"../../../redux/profile-reducer\";\nimport {MyPosts} from \"./MyPosts\";\nimport {Dispatch} from \"redux\";\nimport {AllAppStateType} from \"../../../redux/redux-store\";\nimport {connect} from \"react-redux\";\n\n\nexport type MapStatePropsType = {\n    profilePage: InitialStateType\n}\n\nexport type MapDispatchPropsType = {\n    addPost: (newPostBody: string) => void\n}\n\nlet mapStateToProps = (state: AllAppStateType): MapStatePropsType => {\n    return {\n        profilePage: state.profilePage\n    }\n}\n\nlet mapDispatchToProps = (dispatch: Dispatch): MapDispatchPropsType => {\n    return {\n        addPost: (newPostBody) => {\n            dispatch(AddPostActionCreator(newPostBody))\n        }\n    }\n}\n\nexport const MyPostsContainer = connect(mapStateToProps, mapDispatchToProps)(MyPosts)\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n","import React from \"react\";\nimport {ProfileInfo} from \"./ProfileInfo/ProfileInfo\";\nimport {MyPostsContainer} from \"./MyPosts/MyPostsContainer\";\nimport {ProfileType} from \"./ProfileContainer\";\nimport {photoFileType} from \"../../redux/profile-reducer\";\n\n\ntype ProfilePropsType = {\n    profile: ProfileType\n    status: string\n    updateStatus: (status: string) => void\n    isOwner: boolean\n    changePhoto: (file: photoFileType) => void\n}\n\n\nexport const Profile = React.memo((props: ProfilePropsType) =>  {\n\n    return (\n        <div>\n            <ProfileInfo profile={props.profile}\n                         status={props.status}\n                         updateStatus={props.updateStatus}\n                         isOwner={props.isOwner}\n                         changePhoto={props.changePhoto}\n\n            />\n            <MyPostsContainer />\n        </div>\n    )\n})","import React from \"react\";\nimport {Profile} from \"./Profile\";\nimport {connect} from \"react-redux\";\nimport {changePhotoTC, getProfileTC, getStatusTC, photoFileType, updateStatusTC} from \"../../redux/profile-reducer\";\nimport {AllAppStateType} from \"../../redux/redux-store\";\nimport {RouteComponentProps, withRouter} from \"react-router-dom\";\nimport {compose} from \"redux\";\nimport {withAuthRedirect} from \"../../hoc/WithAuthRedirect\";\n\n\nexport type ContactsType = {\n    \"facebook\": string\n    \"website\": string\n    \"vk\": string\n    \"twitter\": string\n    \"instagram\": string\n    \"youtube\": string\n    \"github\": string\n    \"mainLink\": string\n}\n\nexport type PhotosType = {\n    small: string\n    large: string\n}\n\nexport type ProfileType = {\n    aboutMe: string\n    contacts: ContactsType\n    lookingForAJob: boolean\n    lookingForAJobDescription: string\n    fullName: string\n    userId: number\n    photos: PhotosType\n}\n\nexport type ProfileContainerPropsType = {\n    profile: ProfileType\n    getProfileTC: (userId: string) => void\n    getStatusTC: (userId: string) => void\n    status: string\n    updateStatusTC: (status: string) => void\n    authorizedUserId: string\n    isFetching: boolean\n    changePhotoTC: (file: photoFileType) => void\n\n}\n\n\ntype PathParamType = {\n    userId: string\n}\n\nexport type CommonPropsType = RouteComponentProps<PathParamType> & ProfileContainerPropsType\n\nclass ProfileContainer extends React.Component<CommonPropsType> {\n\n    refreshProfile () {\n        let userId = this.props.match.params.userId\n        if (!userId) {\n            userId = this.props.authorizedUserId\n            if (!userId) {\n                this.props.history.push('/login')\n            }\n        }\n\n        this.props.getProfileTC(userId);\n        this.props.getStatusTC(userId)\n    }\n\n\n\n    componentDidMount() {\n       this.refreshProfile()\n    }\n\n\n    componentDidUpdate(prevProps: Readonly<CommonPropsType>, prevState: Readonly<{}>) {\n        if (this.props.match.params.userId !== prevProps.match.params.userId) {\n            this.refreshProfile()\n        }\n    }\n\n\n    render() {\n\n        return (\n            <>\n                <Profile {...this.props}\n                         isOwner={!this.props.match.params.userId}\n                         profile={this.props.profile}\n                         status={this.props.status}\n                         updateStatus={this.props.updateStatusTC}\n                         changePhoto={this.props.changePhotoTC}\n                />\n            </>\n\n        )\n    }\n}\n\nlet mapStateToProps = (state: AllAppStateType) => ({\n    profile: state.profilePage.profile,\n    status: state.profilePage.status,\n    authorizedUserId: state.auth.id,\n    isAuth: state.auth.isAuth,\n    isFetching: state.usersPage.isFetching\n})\n\n\nexport default compose<React.ComponentType>(\n    connect(mapStateToProps, {getProfileTC, getStatusTC, updateStatusTC, changePhotoTC}),\n    withRouter,\n    withAuthRedirect\n)(ProfileContainer);\n"],"sourceRoot":""}